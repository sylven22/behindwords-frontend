<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>BehindWords — Sylven Mode</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<!-- ===========================================================
   SYLVEN MODE — FINAL UI THEME
   ALL EFFECTS ENABLED AS REQUESTED
=========================================================== -->

<style>

/* =========================
   DESIGN TOKENS
========================= */
:root{
  --bg-dark:#05040a;
  --text:#e9f0f2;
  --muted:#9aa3a9;
  --accent1:#b57aff;
  --accent2:#6a3cff;
  --panel:rgba(255,255,255,0.03);
  --radius:16px;
  --maxw:1180px;
}
/* heavy, deliberate reveal */
@keyframes sylvenReveal {
  0% { opacity: 0; transform: translateY(14px) scale(0.985); filter: blur(6px) }
  60% { opacity: 1; transform: translateY(-4px) scale(1.02); filter: blur(0.9px) }
  100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0) }
}
.result-card { animation: sylvenReveal .62s cubic-bezier(.2,.8,.3,1); }


/* =========================
   BASE
========================= */
*{box-sizing:border-box;}
body{
  margin:0;
  padding:32px;
  font-family:Inter,system-ui,-apple-system;
  color:var(--text);
  overflow-x:hidden;

  /* Mystic Purple Fog Background */
  background:
    radial-gradient(600px at 30% 20%, rgba(107,42,255,0.12), transparent 70%),
    radial-gradient(800px at 80% 90%, rgba(150,50,255,0.10), transparent 70%),
    linear-gradient(180deg,#02040a,#05040a);
}

.container{
  max-width:var(--maxw);
  margin:auto;
}

/* =========================
   FLOATING PARTICLES
========================= */
.particles{
  pointer-events:none;
  position:fixed;
  inset:0;
  overflow:hidden;
  z-index:0;
}

.particle{
  position:absolute;
  width:4px;height:4px;
  background:rgba(180,110,255,0.6);
  border-radius:50%;
  filter:blur(1px);
  animation: drift 14s infinite linear;
  opacity:0.4;
}

@keyframes drift {
  0%{transform:translateY(0) translateX(0);opacity:0.4;}
  100%{transform:translateY(-800px) translateX(200px);opacity:0;}
}

/* =========================
   HEADER / LOGO BADGE
========================= */
.sylven-header{
  margin-bottom:26px;
  padding:16px 20px;
  border-radius:var(--radius);
  backdrop-filter: blur(8px);
  border:1px solid rgba(255,255,255,0.05);

  background:rgba(20,12,35,0.25);
  box-shadow:
    0 0 22px rgba(140,80,255,0.15),
    0 12px 40px rgba(0,0,0,0.6);
  
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:relative;
  z-index:10;
}

.sylven-badge{
  display:flex;
  align-items:center;
  gap:16px;
}

.sylven-logo{
  width:72px;
  height:72px;
  padding:6px;
  border-radius:18px;

  background:rgba(0,0,0,0.2);
  display:flex;
  align-items:center;
  justify-content:center;

  box-shadow:
    0 0 50px rgba(130,60,255,0.16),
    inset 0 -8px 20px rgba(0,0,0,0.4);

  position:relative;
  transition:0.28s ease;
}

.sylven-logo img{
  width:100%;
  height:100%;
  border-radius:14px;
  object-fit:cover;
  filter:drop-shadow(0 10px 25px rgba(140,70,255,0.25));
}

/* Medium Glow */
.sylven-logo::after{
  content:"";
  position:absolute;
  inset:-10px;
  border-radius:22px;
  box-shadow:0 0 38px 14px rgba(140,70,255,0.24);
  opacity:0.9;
  transition:0.4s ease;
}

/* Hover pop */
.sylven-logo:hover{
  transform:translateY(-4px) scale(1.03);
}
.sylven-logo:hover::after{
  box-shadow:0 0 58px 24px rgba(160,80,255,0.32);
}

.sylven-title h1{
  margin:0;
  font-size:22px;
  font-weight:700;
  letter-spacing:0.6px;
}
.sylven-title p{
  margin:0;
  margin-top:4px;
  font-size:14px;
  color:var(--muted);
}

.sylven-line{
  width:180px;
  height:2px;
  margin-top:10px;
  border-radius:999px;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  box-shadow:0 6px 16px rgba(140,70,255,0.12);
}

.sylven-meta{
  font-size:14px;
  color:var(--muted);
  display:flex;
  gap:16px;
  align-items:center;
}

/* =========================
   LAYOUT + PANEL CARDS
========================= */
.layout{
  display:grid;
  grid-template-columns:1fr 420px;
  gap:26px;
}

.card{
  background:rgba(255,255,255,0.02);
  border-radius:var(--radius);
  padding:20px;

  border:1px solid rgba(255,255,255,0.05);

  /* Hybrid soft + neon outline */
  box-shadow:
    0 0 16px rgba(120,70,255,0.10),
    inset 0 0 12px rgba(255,255,255,0.02),
    0 16px 40px rgba(0,0,0,0.55);

  backdrop-filter:blur(4px);
}

/* =========================
   TEXTAREA
========================= */
textarea{
  width:100%;
  min-height:160px;
  padding:16px;
  resize:none;

  border-radius:14px;
  border:1px solid rgba(255,255,255,0.06);
  background:rgba(0,0,0,0.25);
  color:var(--text);
  font-size:15.5px;

  box-shadow:inset 0 0 20px rgba(0,0,0,0.4);
}

/* =========================
   BUTTONS
========================= */
.controls{
  display:flex;
  gap:12px;
  margin-top:16px;
}

.btn{
  padding:11px 16px;
  border-radius:999px;
  border:none;
  font-weight:700;
  cursor:pointer;
  transition:0.25s ease;
}

/* Gradient + Glow buttons */
.btn.primary{
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  color:#08030f;
  box-shadow:0 12px 36px rgba(140,70,255,0.25);
}
.btn.primary:hover{
  transform:translateY(-3px);
  box-shadow:0 16px 50px rgba(150,80,255,0.35);
}

.btn.ghost{
  background:transparent;
  border:1px solid rgba(255,255,255,0.10);
  color:var(--text);
}
.btn.ghost:hover{
  border-color:rgba(150,80,255,0.6);
  transform:translateY(-3px);
}

/* =========================
   REVEAL CHIPS
========================= */
.reveal-row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:16px;
}

.reveal-chip{
  padding:8px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.08);
  background:rgba(0,0,0,0.25);
  color:var(--text);
  font-weight:700;
  cursor:pointer;
  transition:0.25s ease;
}
.reveal-chip:hover{
  border-color:rgba(150,80,255,0.7);
  box-shadow:0 8px 22px rgba(140,70,255,0.2);
  transform:translateY(-3px);
}

/* =========================
   RESULT CARDS
========================= */
.results{
  display:flex;
  flex-direction:column;
  gap:14px;
}

/* Bounce micro-motion */
@keyframes bounceIn {
  0%{opacity:0;transform:scale(0.86) translateY(10px);}
  60%{opacity:1;transform:scale(1.04);}
  100%{transform:scale(1);}
}

.result-card{
  padding:16px;
  border-radius:14px;

  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.05);
  box-shadow:
    0 0 14px rgba(120,70,255,0.12),
    inset 0 0 14px rgba(255,255,255,0.02),
    0 14px 30px rgba(0,0,0,0.5);

  animation:bounceIn .35s ease;
}

.result-title{
  font-weight:800;
  font-size:17px;
  color:var(--accent1);
  margin-bottom:8px;
}

.result-body{
  white-space:pre-wrap;
  font-size:15px;
  line-height:1.55;
  color:var(--text);
}

/* =========================
   SMALL TEXT
========================= */
.note{color:var(--muted);margin-top:14px;font-size:13px;}
.kv{font-size:14px;color:var(--muted);}

/* =========================
   RESPONSIVE
========================= */
@media(max-width:920px){
  .layout{grid-template-columns:1fr;}
  .sylven-line{width:100%;}
}
/* =========================
   MOBILE OPTIMIZATION (Sylven Mode)
========================= */
@media (max-width: 600px){

  body{
    padding: 18px;
  }

  .sylven-header{
    padding: 12px 14px;
  }

  .sylven-logo{
    width: 56px;
    height: 56px;
    padding: 4px;
  }

  .sylven-title h1{
    font-size: 18px;
  }

  .sylven-title p{
    font-size: 12px;
  }

  .sylven-line{
    width: 120px;
    height: 2px;
  }

  /* Layout stacked */
  .layout{
    grid-template-columns: 1fr;
    gap: 20px;
  }

  /* Textarea improve */
  textarea{
    min-height: 140px;
    font-size: 15px;
    padding: 14px;
  }

  /* Buttons bigger */
  .btn{
    padding: 10px 14px;
    font-size: 14px;
  }

  /* Reveal chips */
  .reveal-chip{
    padding: 7px 12px;
    font-size: 13px;
  }

  /* Cards spacing */
  .card{
    padding: 16px;
  }

  .result-card{
    padding: 14px;
  }

  .result-title{
    font-size: 16px;
  }

  .result-body{
    font-size: 14px;
    line-height: 1.45;
  }

  /* Particles less heavy */
  .particle{
    width: 3px;
    height: 3px;
    opacity: 0.28;
  }
}

</style>
</head>

<body>

<!-- =========================
     FLOATING PARTICLES
========================= -->
<div class="particles">
  <div class="particle" style="top:80%; left:10%; animation-duration:10s;"></div>
  <div class="particle" style="top:90%; left:50%; animation-duration:14s;"></div>
  <div class="particle" style="top:95%; left:75%; animation-duration:12s;"></div>
  <div class="particle" style="top:85%; left:30%; animation-duration:11s;"></div>
  <div class="particle" style="top:88%; left:60%; animation-duration:13s;"></div>
</div>

<div class="container">

<!-- =========================
     HEADER
========================= -->
<div class="sylven-header">

  <div class="sylven-badge">

    <div class="sylven-logo">
      <img src="./sylven_aura.png" alt="Sylven logo">
    </div>

    <div class="sylven-title">
      <h1>BehindWords — Sylven Mode</h1>
      <p>Silent observation • tactical reveals</p>
      <div class="sylven-line"></div>
    </div>

  </div>

  <div class="sylven-meta">
    <div class="kv">Daily limit: <strong id="limitCount">10</strong></div>
    <button id="themeToggle" class="btn ghost">Theme</button>
  </div>

</div>

<!-- =========================
     MAIN LAYOUT
========================= -->
<div class="layout">

  <!-- LEFT -->
  <div class="card">
    <div style="font-weight:700;margin-bottom:8px">Paste message</div>
    <textarea id="message" placeholder="Paste chat message..."></textarea>

    <div class="controls">
      <button class="btn primary" id="decode">Decode</button>
      <button class="btn ghost" id="copyIn">Copy</button>
      <button class="btn ghost" id="clear">Clear</button>
    </div>

    <div class="reveal-row">
      <div class="reveal-chip" data-key="surface">Surface Behaviour</div>
      <div class="reveal-chip" data-key="inside">Inside Psychology</div>
      <div class="reveal-chip" data-key="hidden">Hidden Reality</div>
      <div class="reveal-chip" data-key="next">Next Move</div>
    </div>

    <div class="note">
      Decode first → then click a chip to reveal analysis on the right.
    </div>
  </div>

  <!-- RIGHT -->
  <div class="card">
    <div style="display:flex;justify-content:space-between;margin-bottom:8px">
      <span style="font-weight:700;">Result</span>
      <span style="color:var(--muted)">Local dummy mode</span>
    </div>
    <div id="resultsArea" class="results">
      <div class="result-card"><div class="result-title">(no reveals yet)</div><div class="result-body">Click a chip after Decode.</div></div>
    </div>
  </div>

</div>
</div>


<!-- =========================
     JS — SAME FUNCTIONALITY
========================= -->
<script>
/* ---------- Smart-ish dummy decoder ---------- */
const emotionalWords = ["love","hate","angry","sad","happy","manipulat","cheat","sorry","miss","hurt","proud","jeal","scared","fear","worried"];
const questionWords = ["?","how","why","what","when","are","is","do","did","can"];
const toneMapping = [
  {name:'neutral', cue:'neutral/reserved'},
  {name:'soft', cue:'soft/conciliatory'},
  {name:'firm', cue:'firm/assertive'},
  {name:'hostile', cue:'hostile/defensive'}
];

let analysis = {surface:'', inside:'', hidden:'', next:''};
let revealed = {};   // STOP duplicate cards

function smartDecode(text){
  const t = text.trim();
  const lower = t.toLowerCase();
  const hasQuestion = /[?]/.test(t) || questionWords.some(w=> lower.startsWith(w+" "));
  const hasEmotion = emotionalWords.some(w => lower.includes(w));
  const len = t.length;

  let tone = 'neutral';
  if(hasEmotion && lower.match(/manipulat|hate|cheat|angry|jeal/)) tone='hostile';
  else if(hasEmotion && lower.match(/love|miss|sorry|sad|happy|proud/)) tone='soft';
  else if(len>80) tone='firm';

  let s = `Surface Behaviour:\n- Message: "${t}"`;
  if(hasQuestion) s += `\n- Observed: curiosity / question pattern.`;
  if(tone==='hostile') s += `\n- Observed: defensive tone.`;

  let inside = `Inside Psychology:\n- (${toneMapping.find(x=>x.name===tone).cue})`;
  if(tone==='hostile') inside += ` Possible insecurity, projection, or testing boundaries.`;
  if(tone==='soft') inside += ` Seeking reassurance or emotional closeness.`;
  if(tone==='neutral') inside += ` Guarded; not revealing deeper layers.`;
  if(tone==='firm') inside += ` Processing thoughts; structured tone.`;

  let hidden = `Hidden Reality:\n- (inferred) `;
  if(lower.includes('manipulat') || lower.includes('cheat')) hidden += `May be shifting blame or controlling narrative.`;
  else if(hasQuestion) hidden += `May be probing for info.`;
  else hidden += `Observe pattern before responding.`;

  let next = `Next Move:\n- Recommended: `;
  if(tone==='hostile') next += `Stay neutral; don't escalate.`;
  else if(tone==='soft') next += `Use calm reassurance.`;
  else if(hasQuestion) next += `Answer simply; avoid assumptions.`;
  else next += `Short neutral reply; wait for next signal.`;

  return {surface:s, inside:inside, hidden:hidden, next:next};
}

/* ---------- UI handling ---------- */
const decodeBtn = document.getElementById('decode');
const resultsArea = document.getElementById('resultsArea');
const chips = document.querySelectorAll('.reveal-chip');

decodeBtn.onclick = () => {
  const txt = document.getElementById('message').value.trim();
  if(!txt){ alert("Enter a message first."); return; }

  analysis = smartDecode(txt);
  revealed = {}; // reset revealed tracker

  // Clear right side completely — NO placeholder
  resultsArea.innerHTML = "";
};

chips.forEach(chip => {
  chip.onclick = () => {
    const key = chip.dataset.key;
    if(!analysis.surface){ alert("Decode first."); return; }

    if(revealed[key]) return; // STOP duplicate reveal ✔

    revealed[key] = true;

    const titles = {
      surface: "Surface Behaviour",
      inside: "Inside Psychology",
      hidden: "Hidden Reality",
      next: "Next Move"
    };

    resultsArea.insertAdjacentHTML("afterbegin", `
      <div class="result-card">
        <div class="result-title">${titles[key]}</div>
        <div class="result-body">${escapeHtml(analysis[key])}</div>
      </div>
    `);
  };
});

document.getElementById('copyIn').onclick = ()=>{
  navigator.clipboard.writeText(document.getElementById('message').value);
};

document.getElementById('clear').onclick = ()=>{
  document.getElementById('message').value = "";
  resultsArea.innerHTML = "";
  revealed = {};
};

function escapeHtml(s){
  return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
}

/* theme toggle */
document.getElementById('themeToggle').onclick = ()=>{
  document.body.classList.toggle('light');
  if(document.body.classList.contains('light')){
    document.body.style.background = 'linear-gradient(180deg,#f5f7fb,#eef2f7)';
    document.querySelectorAll('.card').forEach(c => c.style.background = 'white');
  } else {
    document.body.style.background = 'linear-gradient(180deg,#02040a,#05040a)';
    document.querySelectorAll('.card').forEach(c => c.style.background = 'rgba(255,255,255,0.02)');
  }
};
</script>

</body>

</html>
